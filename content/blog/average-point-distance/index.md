---
title: "平均拠点間隔"
date: "2023-05-16"
---

## 問題

ある面積 $A$ に拠点を $n$ 箇所設置するとき、拠点間の間隔はどれくらいになるのかざっくり知りたい。

## 結論

面積 $A$ に拠点を $n$ 箇所設置するとき、平均の拠点間隔 $\bar{d}$ は以下のようになる。

$$
\bar{d} = 2 \sqrt{ \frac { \sqrt{3} A } { 6n }  }
$$

特にエリアが半径 $R$ の円であるとき、

$$
\bar{d} = 2 \sqrt{ \frac { \sqrt{3} \pi } { 6n }  } R
$$

となる。

ただし、$n$ が小さいときは誤差が大きいので注意。

## 考え方

大胆な近似をおこなう。

1. 面積 $A$ が $n$ 個の正六角形を敷き詰めて構成されていると仮定する
1. 正六角形の中心の間の距離を求める

### なぜ六角形か

まず、平面に敷き詰められる正多角形は正三角形・正四角形（正方形）・正六角形しかない。

また、https://www.uber.com/en-us/blog/h3/ で

> hexagons have only one distance between a hexagon centerpoint and its neighbors’, compared to two distances for squares or three distances for triangles.

と書かれている通り、正六角形には「隣接する正六角形の中心との距離がすべて等しい」という性質があり扱いやすいため、正六角形を計算に使用する。

### 計算

正六角形の内接円の半径（中心から辺への垂線の長さ）を $r$ とすると、正六角形の面積 $A_{hex}$ は以下のように書ける。

$$
A_{hex} = 2 \sqrt{3} r^2
$$

また、はじめに示した分割の方針から、

$$
A = n A_{hex}
$$

であり、正六角形の中心から隣接する正六角形の中心までの距離 $\bar{d}$ は

$$
\bar{d} = 2r
$$

である。

これらをまとめると、

$$
A = \frac { \sqrt{3} } { 2 } n \bar{d}^2
$$

特にエリアが半径 $R$ の円であるとき、

$$
\pi R^2 = \frac { \sqrt{3} } { 2 } n \bar{d}^2
$$

となる。

$\bar{d}$ について解くと、

$$
\begin{aligned}
\bar{d} &= 2 \sqrt{ \frac { \sqrt{3} A } { 6 n } } \\
        &= 2 \sqrt{ \frac { \sqrt{3} \pi } { 6 n } } R
\end{aligned}
$$

となる。

## おわりに

上のモデルはかなり大胆な仮定を置いている。
実際には点は均等に分布しないことが普通だし、そもそも任意の図形に対して正六角形を敷き詰めることはできない。

特に $n$ が小さくなればなるほど近似の精度が悪くなる点には注意が必要だろう。

しかし、具体的な点の位置が決まっていない状況で、ざっくりでも良いので簡単な式で概算できると嬉しいことがあり、そういった状況のためにモデルを考えて式にしてみた。
